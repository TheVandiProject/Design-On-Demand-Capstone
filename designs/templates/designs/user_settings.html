{% extends "designs/base.html" %}
{% load static %}
{% load crispy_forms_tags %}



{% block title %}User Home Page{% endblock %}

{% block stylesheet %}
    <script src="{% static 'designs/js/scripts.js' %}"></script>
    <link rel="stylesheet" href="{% static 'designs/css/user_settings.css' %}"/>

{% endblock %}

{% block content %}


<div class="content-section">
  <div class="media">
    <img class="rounded-circle account-img" src="{{ user.profile.image.url }}" />
    <div class="media-body">
      <h2 class="account-heading">{{ user.username }}</h2>
      <p class="text-secondary">{{ user.email }}</p>
    </div>
  </div>
<!-- FORM HERE -->
<form method="POST" enctype="multipart/form-data" action="{% url 'update_profile' %}">
  {% csrf_token %}
  <fieldset class="form-group">
    <legend class="border-bottom mb-4">Profile Info</legend>
    {{ u_form|crispy }}
    <!-- User form -->
    {{ p_form|crispy }}
    <!-- Profile form -->
    {% comment %} <h3><label for="image">Upload an image:</label></h3>
    <input type="file" name="image" id="image" accept="image/*">
    <input type="submit" value="Upload Image"> {% endcomment %}
  </fieldset>
  <div class="form-group">
    <button class="btn btn-outline-info" type="submit">Update</button>
  </div>
</form>
</div>



<div class="settings">
    <h2>User Settings</h2>
  
    <form method="post" action="{% url 'change_password' %}">
      {% csrf_token %}
  
      <div class="setting">
        <label for="new_password">New Password:</label>
        <input type="password" id="new_password" name="new_password" required>
        <label for="confirm_password">Confirm New Password:</label>
  
        
  <input  type="password" id="confirm_password" name="confirm_password" required>
  
  <button type="submit" class="password-btn">Update Password</button>
      </div>
    </form>
  
    <form action="#" method="post" class="delete-account-form">
      {% csrf_token %}
  
      <div class="setting">
        <p>Are you sure you want to delete your account? This action cannot be undone.</p>
        <input type="checkbox" id="delete_confirmation" name="delete_confirmation" required>
        <label for="delete_confirmation">I confirm that I want to delete my account.</label>
  
        <button type="submit" class="delete-btn">Delete Account</button>
      </div>
    </form>
  

{% endblock %}